{"version":3,"sources":["AuthContext.js","utils/constants.js","utils/index.js","utils/update.js","components/PollToggle/index.js","components/Admin/SetUserPermissionsDialog.js","components/Admin/UserRemoveDialog.js","components/Admin/index.js","components/Search/SearchBar.js","components/NotificationList.js","components/Layout/Header.js","components/Layout/SideMenu.js","components/Layout/Body.js","components/Layout/index.js","utils/token.js","components/ProfileList.js","components/Channel/AddChannelDialog.js","components/ChannelList.js","components/Dm/AddDmDialog.js","components/DmList.js","components/ProfileChannelLists.js","components/WorkspaceStats.js","pages/HomePage.js","components/Channel/AddMemberDialog.js","components/Message/AddMessageTimerDialog.js","components/Message/AddMessage.js","components/Dm/DmMessages.js","components/Message/MessagePin.js","components/Message/MessageReact.js","components/Message/MessageRemove.js","components/Message/MessageEdit.js","components/Message/MessageShareDialog.js","components/Message/index.js","components/Channel/ChannelMessages.js","components/Placeholder.js","components/Channel/index.js","pages/ChannelPage.js","components/Dm/index.js","pages/DmPage.js","pages/LoginPage.js","pages/RegisterPage.js","pages/ForgotPasswordPage.js","pages/ResetPasswordPage.js","components/Profile/EditableFields.js","components/Profile/UserStats.js","components/Profile/index.js","pages/ProfilePage.js","components/Search/index.js","pages/SearchPage.js","components/Layout/ProtectedRoute.js","axios.js","utils/text.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","Consumer","require","config","port","deployedUrl","undefined","window","BACKEND_PORT","DEPLOYED_URL","process","REACT_APP_BACKEND_PORT","url","console","log","PERMISSION_IDS","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","isMatchingId","a","b","parseInt","stepSubscribers","subscribeToStep","subscriber","interval","find","o","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","isPolling","count","options","PollToggle","useState","open","setOpen","anchorRef","selectedIndex","setSelectedIndex","handleMenuItemClick","event","index","handleClose","contains","target","ButtonGroup","variant","color","ref","aria-label","style","marginRight","Button","onClick","disabled","size","aria-owns","aria-haspopup","prevOpen","Popper","anchorEl","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","map","option","MenuItem","key","selected","SetUserPermissionsDialog","children","permissionId","setPermissionId","users","setUsers","selectedUser","setSelectedUser","token","useContext","axios","get","headers","then","data","catch","err","Dialog","onClose","aria-labelledby","DialogTitle","onSubmit","preventDefault","value","uId","post","Number","response","DialogContent","DialogContentText","Grid","container","spacing","direction","justify","alignItems","item","xs","Select","width","onChange","newUserId","d","idx","nameFirst","nameLast","RadioGroup","name","newPermissionId","row","FormControlLabel","control","Radio","label","labelPlacement","DialogActions","type","UserRemoveDialog","delete","params","Admin","buttonRef","aria-controls","keepMounted","useStyles","makeStyles","theme","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","breakpoints","up","searchIcon","height","pointerEvents","display","justifyContent","inputRoot","inputInput","padding","transitions","create","withRouter","props","classes","queryStr","setQueryStr","history","className","InputBase","placeholder","root","input","inputProps","e","NotificationList","notifs","setNotifs","notifications","length","notif","dmId","component","Link","to","channelId","notificationMessage","appBar","menuButton","title","flexGrow","logoutButton","float","Header","handleMenuToggle","useTheme","matches","useMediaQuery","loggedOut","setLoggedOut","localStorage","removeItem","AppBar","Toolbar","IconButton","edge","textDecoration","Typography","noWrap","drawer","flexShrink","drawerPaper","toolbar","mixins","paddingLeft","SideMenu","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","Divider","xsDown","body","Body","Layout","menu","extractUId","getItem","ProfileList","uid","List","ListItem","button","ListItemIcon","ListItemText","primary","AddChannelDialog","isPublic","checked","TextField","autoFocus","margin","fullWidth","Switch","ChannelList","currChannelId","myChannels","setMyChannels","allChannels","setAllChannels","fetchChannelsData","getMyChannels","getAllChannels","all","spread","myChannelResponse","allChannelResponse","myChannelData","channels","filteredChannels","channel","c","subheader","ListSubheader","flex","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","AddDmDialog","selectedUsers","setSelectedUsers","uIds","multiple","Input","DmList","currDmId","myDms","setMyDms","fetchDmsData","ProfileChannelLists","WorkspaceStats","utilizationRate","setUtilizationRate","channelsData","setChannelsData","dmsData","setDmsData","messagesData","setMessagesData","workspaceStats","obj","x","Date","y","error","toFixed","datasets","fill","borderColor","showLine","scales","xAxes","gridLines","lineWidth","time","unitStepSize","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","HomePage","paddingTop","AddMemberDialog","AddMessageTimerDialog","onTimerChange","selectedDate","setSelectedDate","toDate","KeyboardButtonProps","flexDirection","alignSelf","rightIcon","standupTimer","AddMessage","currentMessage","setCurrentMessage","currentTimer","setCurrentTimer","timerDialogOpen","setTimerDialogOpen","onAdd","StepContext","onAddDm","StepContextDm","isTimerSet","standupRemaining","setStandupRemaining","standupEndTime","setStandupEndTime","submitMessage","message","trim","route","timeSent","getTime","startsWith","found","match","alert","isNaN","isInteger","timeFinish","now","Math","round","checkStandupActive","isActive","multiline","onKeyDown","getModifierState","InputProps","endAdornment","InputAdornment","StepProvider","DmMessages","messages","setMessages","isPaginating","currentStart","currentEnd","sliceStart","pagination","setPagination","fetchDmMessages","p","start","newMessages","end","isEnd","pinnedMessages","m","isPinned","min","messageId","slice","reverse","PAGINATION_SIZE","withTheme","isPinnedState","setIsPinnedState","stepDm","path","mdiPin","action","active","mdiPinOutline","MessageReact","reacts","thumbUpCount","isReacted","thumbUpIndex","findIndex","react","reactId","isThisUserReacted","Badge","anchorOrigin","horizontal","vertical","badgeContent","messageReact","fontSize","MessageRemove","MessageEdit","prompt","put","MessageShareDialog","ogMessageId","selectedChannel","setSelectedChannel","selectedDm","setSelectedDm","selectedChDm","setSelectedChDm","channelsShare","setChannelsShare","dmsShare","setDmsShare","setMessage","rowsMax","Message","isUnread","setNameFirst","setNameLast","imgUrl","setImgUrl","fullName","s","join","initials","user","email","handleStr","profileImgUrl","ListItemAvatar","Avatar","border","src","timeago","secondary","fontFamily","ChannelMessages","fetchChannelMessages","Placeholder","CircularProgress","Channel","loading","setLoading","setName","members","setMembers","owners","setOwners","fetchChannelData","ownerMembers","allMembers","finally","userIsMember","member","userIsOwner","owner","viewerIsMember","toUpperCase","href","removeOwner","addOwner","leaveChannel","joinChannel","ChannelPage","Dm","membersList","setMembersList","fetchDmData","leaveDm","removeDm","DmPage","light","card","background","marginTop","LoginPage","setAuth","Container","maxWidth","Box","boxShadow","noValidate","password","authUserId","required","autoComplete","RegisterPage","values","setValues","handleChange","ForgotPasswordPage","resetCode","newPassword","EditableFields","editable","master","masterValue","slaves","slaveValues","onSave","edit","setEdit","prevMasterValue","setPrevMasterValue","currMasterValue","setCurrMasterValue","prevSlaveValues","setPrevSlaveValues","currSlaveValues","setCurrSlaveValues","toggleEdit","slave","readOnly","valueIndex","copySlaves","val","onSlaveChange","cursor","UserStats","involvementRate","setInvolvementRate","userStats","Profile","profile","profileDetails","setProfileDetails","toString","passedProps","rawText","items","split","xStart","yStart","xEnd","yEnd","ProfilePage","Search","Array","isArray","marginBottom","LinearProgress","SearchPage","ProtectedRoute","defaults","baseURL","CancelToken","interceptors","request","use","toast","Promise","reject","responseMessage","_","App","document","authDetails","setAuthDetails","setItem","exact","render","ResetPasswordPage","Boolean","location","hostname","createMuiTheme","main","red","A400","default","ReactDOM","ThemeProvider","utils","MomentUtils","CssBaseline","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.618647d0.chunk.js","sourcesContent":["import React from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","require(\"dotenv\").config();\n\nlet port = \"0\";\nlet deployedUrl = \"https://example.alwaysdata.net\";\nif (window.BACKEND_PORT !== undefined) {\n  port = window.BACKEND_PORT;\n  deployedUrl = window.DEPLOYED_URL;\n} else {\n  port = process.env.REACT_APP_BACKEND_PORT;\n}\nexport const url =\n  port === \"0\" || port === undefined ? deployedUrl : \"http://localhost:\" + port;\nconsole.log(\"Using backend at \" + url);\n\nexport const drawerWidth = 240;\nexport const PERMISSION_IDS = {\n  OWNER: 1,\n  MEMBER: 2\n};\nexport const PAGINATION_SIZE = 50;\nexport const SLICE_SIZE = 10;\n","// from: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nimport { useEffect, useRef } from \"react\";\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport const isMatchingId = (a, b) => parseInt(a, 10) === parseInt(b, 10);\n","import React from \"react\";\nimport { useInterval } from \"./index\";\n\nexport let stepSubscribers = [];\n\nexport const subscribeToStep = (subscriber, interval = 1) => {\n  if (stepSubscribers.find(o => o.subscriber === subscriber) !== undefined)\n    return;\n  stepSubscribers.push({ subscriber, interval });\n};\nexport const unsubscribeToStep = unsubscriber =>\n  (stepSubscribers = stepSubscribers.filter(\n    o => o.subscriber !== unsubscriber\n  ));\n\nexport const step = iter => {\n  stepSubscribers.forEach(o => {\n    console.log(iter, o.interval, iter % o.interval == 0, o.subscriber);\n    if (!iter || iter % o.interval == 0) {\n      o.subscriber();\n    }\n  });\n};\n\nexport const useStep = (subscriber, watches = [], interval = 1) => {\n  const shouldSubscribe = subscriber && typeof subscriber === \"function\";\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval);\n      return () => unsubscribeToStep(subscriber);\n    }\n  }, watches);\n  return step;\n};\n\nlet isPolling = false;\nexport const pollingInterval = 2000;\nexport const getIsPolling = () => isPolling;\nexport const setIsPolling = bool => {\n  isPolling = !!bool; // force boolean type\n};\n\n/* IMPORTANT: Called in PollToggle */\nlet count = 0;\nexport const usePolling = () => {\n  useInterval(() => {\n    if (isPolling) step(count++);\n  }, pollingInterval);\n};\n","import React from \"react\";\n\nimport Button from \"@material-ui/core/Button\";\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport {\n  getIsPolling,\n  setIsPolling,\n  step,\n  usePolling\n} from \"../../utils/update\";\n\nconst options = [\"Live\", \"Step\"];\n\nfunction PollToggle() {\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const [selectedIndex, setSelectedIndex] = React.useState(\n    getIsPolling() ? 0 : 1\n  );\n\n  usePolling();\n\n  const handleClick = () => {\n    step();\n  };\n\n  const handleMenuItemClick = (event, index) => {\n    setIsPolling(index === 0);\n    setSelectedIndex(index);\n    setOpen(false);\n  };\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <ButtonGroup\n        variant=\"contained\"\n        color=\"primary\"\n        ref={anchorRef}\n        aria-label=\"split button\"\n        style={{ marginRight: 15 }}\n      >\n        <Button onClick={handleClick} disabled={selectedIndex === 0}>\n          {options[selectedIndex]}\n        </Button>\n        <Button\n          color=\"primary\"\n          size=\"small\"\n          aria-owns={open ? \"menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={handleToggle}\n        >\n          <ArrowDropDownIcon />\n        </Button>\n      </ButtonGroup>\n      <Popper open={open} anchorEl={anchorRef.current} transition disablePortal>\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === \"bottom\" ? \"center top\" : \"center bottom\"\n            }}\n          >\n            <Paper id=\"menu-list-grow\">\n              <ClickAwayListener onClickAway={handleClose}>\n                <MenuList>\n                  {options.map((option, index) => (\n                    <MenuItem\n                      key={option}\n                      disabled={index === 2}\n                      selected={index === selectedIndex}\n                      onClick={event => handleMenuItemClick(event, index)}\n                    >\n                      {option}\n                    </MenuItem>\n                  ))}\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </>\n  );\n}\n\nexport default PollToggle;\n","import React from \"react\";\nimport axios from \"axios\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  Grid,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  MenuItem,\n  Select\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { PERMISSION_IDS } from \"../../utils/constants\";\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState(\"\");\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      axios\n        .get(\"/users/all/v2\", {\n          headers: {\n            token\n          }\n        })\n        .then(({ data }) => {\n          setUsers(data[\"users\"]);\n        })\n        .catch(err => {});\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleRadioChange = event => {\n    const newPermissionId = parseInt(event.target.value, 10);\n    setPermissionId(newPermissionId);\n  };\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) return;\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    axios\n      .post(\n        `/admin/userpermission/change/v1`,\n        {\n          uId: Number.parseInt(uId),\n          permissionId: Number.parseInt(permissionId)\n        },\n        { headers: { token } }\n      )\n      .then(response => {\n        console.log(response);\n      })\n      .catch(err => {});\n  }\n\n  return (\n    <>\n      <div onClick={handleClickOpen}>{children}</div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Select a user below to set permissions for this user\n            </DialogContentText>\n            <Grid\n              container\n              spacing={2}\n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={12}>\n                <Select\n                  style={{ width: \"100%\" }}\n                  id=\"uId\"\n                  onChange={handleUserSelect}\n                  value={selectedUser}\n                >\n                  {users.map((d, idx) => {\n                    return (\n                      <MenuItem key={d.uId} value={d.uId}>\n                        {d.nameFirst} {d.nameLast}\n                      </MenuItem>\n                    );\n                  })}\n                </Select>\n              </Grid>\n              <Grid container item justify=\"center\" alignItems=\"center\">\n                <RadioGroup\n                  aria-label=\"position\"\n                  name=\"position\"\n                  value={permissionId}\n                  onChange={handleRadioChange}\n                  row\n                >\n                  <FormControlLabel\n                    value={PERMISSION_IDS.MEMBER}\n                    control={<Radio color=\"primary\" />}\n                    label=\"Member\"\n                    labelPlacement=\"bottom\"\n                  />\n                  <FormControlLabel\n                    value={PERMISSION_IDS.OWNER}\n                    control={<Radio color=\"primary\" />}\n                    label=\"Owner\"\n                    labelPlacement=\"bottom\"\n                  />\n                </RadioGroup>\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Set\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </>\n  );\n}\n\nexport default SetUserPermissionsDialog;\n","import React from \"react\";\nimport axios from \"axios\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  Grid,\n  MenuItem,\n  Select\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction UserRemoveDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState(\"\");\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      axios\n        .get(\"/users/all/v2\", {\n          headers: {\n            token\n          }\n        })\n        .then(({ data }) => {\n          setUsers(data[\"users\"]);\n        })\n        .catch(err => {});\n    }\n\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) return;\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    axios\n      .delete(`/admin/user/remove/v1`, {\n        headers: { token },\n        params: {\n          uId: Number.parseInt(uId)\n        }\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(err => {});\n  }\n\n  return (\n    <>\n      <div onClick={handleClickOpen}>{children}</div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Remove Users</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>Select a user below to remove</DialogContentText>\n            <Grid\n              container\n              spacing={2}\n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={12}>\n                <Select\n                  style={{ width: \"100%\" }}\n                  id=\"uId\"\n                  onChange={handleUserSelect}\n                  value={selectedUser}\n                >\n                  {users.map(d => {\n                    return (\n                      <MenuItem key={d.uId} value={d.uId}>\n                        {d.nameFirst} {d.nameLast}\n                      </MenuItem>\n                    );\n                  })}\n                </Select>\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Remove\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </>\n  );\n}\n\nexport default UserRemoveDialog;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SetUserPermissionsDialog from \"./SetUserPermissionsDialog\";\nimport UserRemoveDialog from \"./UserRemoveDialog\";\n\nexport default function Admin() {\n  const [open, setOpen] = React.useState(false);\n  const buttonRef = React.useRef();\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n    <div>\n      <Button\n        ref={buttonRef}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        Admin\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={buttonRef.current}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        <SetUserPermissionsDialog>\n          <MenuItem onClick={handleClose}>Set User Permissions</MenuItem>\n        </SetUserPermissionsDialog>\n        <UserRemoveDialog>\n          <MenuItem onClick={handleClose}>Remove Users</MenuItem>\n        </UserRemoveDialog>\n        <MenuItem onClick={handleClose}>Close</MenuItem>\n      </Menu>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nconst useStyles = makeStyles(theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(1),\n      width: \"auto\",\n      marginRight: theme.spacing(2)\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: 120,\n      \"&:focus\": {\n        width: 200\n      }\n    }\n  }\n}));\n\nfunction SearchBar(props) {\n  const classes = useStyles();\n\n  const [queryStr, setQueryStr] = React.useState(\"\");\n\n  const onSubmit = () => props.history.push(`/search/${queryStr}`);\n\n  return (\n    <form onSubmit={onSubmit}>\n      <div className={classes.search}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          placeholder=\"Search\"\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          value={queryStr}\n          onChange={e => setQueryStr(e.target.value)}\n        />\n      </div>\n    </form>\n  );\n}\n\nexport default withRouter(SearchBar);\n","import React from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport AuthContext from \"../AuthContext\";\n\nexport default function NotificationList() {\n  const [open, setOpen] = React.useState(false);\n  const [notifs, setNotifs] = React.useState([]);\n  const buttonRef = React.useRef();\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    axios\n      .get(\"/notifications/get/v1\", {\n        headers: { token }\n      })\n      .then(({ data }) => {\n        setNotifs(data.notifications);\n      })\n      .catch(err => {});\n  }, [open, token]);\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n    <div>\n      <Button\n        ref={buttonRef}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        Notifications\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={buttonRef.current}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        {notifs.length === 0 ? (\n          <div>&nbsp;You don't have any notifications.&nbsp;</div>\n        ) : (\n          notifs.map(notif => {\n            if (notif.dmId === -1) {\n              return (\n                <MenuItem component={Link} to={`/channel/${notif.channelId}`}>\n                  {notif.notificationMessage}\n                </MenuItem>\n              );\n            } else {\n              return (\n                <MenuItem component={Link} to={`/dm/${notif.dmId}`}>\n                  {notif.notificationMessage}\n                </MenuItem>\n              );\n            }\n          })\n        )}\n        <MenuItem onClick={handleClose}>Close</MenuItem>\n      </Menu>\n    </div>\n  );\n}\n","import axios from \"axios\";\nimport {\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography\n} from \"@material-ui/core\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport AuthContext from \"../../AuthContext\";\nimport { drawerWidth } from \"../../utils/constants\";\nimport PollToggle from \"../PollToggle\";\nimport Admin from \"../Admin\";\nimport SearchBar from \"../Search/SearchBar\";\nimport NotificationList from \"../NotificationList\";\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    marginLeft: drawerWidth,\n    [theme.breakpoints.up(\"sm\")]: {\n      width: `calc(100% - ${drawerWidth}px)`\n    }\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  },\n  logoutButton: {\n    float: \"right\"\n  }\n}));\n\nfunction Header({ handleMenuToggle = () => {} }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"));\n  const token = React.useContext(AuthContext);\n  const [loggedOut, setLoggedOut] = React.useState(false);\n\n  if (loggedOut) {\n    axios\n      .post(`/auth/logout/v2`, {}, { headers: { token } })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(err => {});\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"uId\");\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        {!matches && (\n          <>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleMenuToggle}\n              className={classes.menuButton}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Link to=\"/\" style={{ color: \"white\", textDecoration: \"none\" }}>\n              <Typography variant=\"h5\" noWrap>\n                Treats\n              </Typography>\n            </Link>\n          </>\n        )}\n        <div variant=\"h6\" className={classes.title}></div>\n        <div style={{ display: \"flex\" }}>\n          <SearchBar />\n          <PollToggle />\n          <NotificationList />\n          <Admin />\n          <Button\n            color=\"inherit\"\n            className={classes.logoutButton}\n            onClick={() => {\n              setLoggedOut(true);\n            }}\n          >\n            Logout\n          </Button>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport { Divider, Drawer, Hidden, Typography } from \"@material-ui/core\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { drawerWidth } from \"../../utils/constants\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up(\"sm\")]: {\n      width: drawerWidth,\n      flexShrink: 0\n    }\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingLeft: theme.spacing(2)\n  }\n}));\n\nfunction SideMenu({ container, children, open, setOpen }) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n    <nav className={classes.drawer} aria-label=\"channels\">\n      {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n      <Hidden smUp implementation=\"css\">\n        <Drawer\n          container={container}\n          variant=\"temporary\"\n          anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\n          open={open}\n          onClose={() => setOpen(false)}\n          classes={{\n            paper: classes.drawerPaper\n          }}\n          ModalProps={{\n            keepMounted: true // Better open performance on mobile.\n          }}\n        >\n          <div className={classes.toolbar} />\n          <Divider />\n          {children}\n        </Drawer>\n      </Hidden>\n      <Hidden xsDown implementation=\"css\">\n        <Drawer\n          classes={{\n            paper: classes.drawerPaper\n          }}\n          variant=\"permanent\"\n          open\n        >\n          <div className={classes.toolbar}>\n            <Link to=\"/\" style={{ color: \"black\", textDecoration: \"none\" }}>\n              <Typography variant=\"h5\" noWrap>\n                Treats\n              </Typography>\n            </Link>\n          </div>\n          {children}\n        </Drawer>\n      </Hidden>\n    </nav>\n  );\n}\n\nexport default SideMenu;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { drawerWidth } from \"../../utils/constants\";\n\nconst useStyles = makeStyles(theme => ({\n  body: {\n    [theme.breakpoints.up(\"sm\")]: {\n      width: `calc(100% - ${drawerWidth}px)`\n    },\n    padding: 20\n  },\n  toolbar: theme.mixins.toolbar\n}));\n\nfunction Body({ children }) {\n  const classes = useStyles();\n  return (\n    <div className={classes.body}>\n      {/* Padding */}\n      <div className={classes.toolbar} />\n      {children}\n    </div>\n  );\n}\n\nexport default Body;\n","import React from \"react\";\nimport Header from \"./Header\";\nimport SideMenu from \"./SideMenu\";\nimport Body from \"./Body\";\n\nfunction Layout({ menu, body }) {\n  const [open, setOpen] = React.useState(false);\n  function handleMenuToggle() {\n    setOpen(open => !!!open);\n  }\n  return (\n    <div style={{ display: \"flex\" }}>\n      <Header handleMenuToggle={handleMenuToggle} />\n      <SideMenu open={open} setOpen={setOpen}>\n        {menu}\n      </SideMenu>\n      <Body>{body}</Body>\n    </div>\n  );\n}\n\nexport default Layout;\n","export function extractUId(token) {\n  let uId = localStorage.getItem(\"uId\");\n  if (uId == null) {\n    uId = -1;\n  }\n  return uId;\n}\n","import React from \"react\";\nimport { List, ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport { Link } from \"react-router-dom\";\nimport { extractUId } from \"../utils/token\";\nimport AuthContext from \"../AuthContext\";\n\nfunction ProfileList() {\n  const uid = extractUId(React.useContext(AuthContext));\n  return (\n    <List>\n      <ListItem button key={\"profile\"} component={Link} to={`/profile/${uid}`}>\n        <ListItemIcon>\n          <AccountCircle />\n        </ListItemIcon>\n        <ListItemText primary=\"Profile\" />\n      </ListItem>\n    </List>\n  );\n}\n\nexport default ProfileList;\n","import React from \"react\";\nimport axios from \"axios\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n  Button,\n  Switch,\n  TextField,\n  Grid,\n  FormControlLabel\n} from \"@material-ui/core\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport Add from \"@material-ui/icons/Add\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction AddChannelDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const name = event.target[0].value;\n    const secret = event.target[1].checked;\n    const isPublic = !secret;\n\n    if (!name) return;\n\n    axios\n      .post(`/channels/create/v3`, { name, isPublic }, { headers: { token } })\n      .then(response => {\n        console.log(response);\n        props.callback();\n      })\n      .catch(err => {});\n  }\n  return (\n    <div>\n      <IconButton size=\"small\" onClick={handleClickOpen}>\n        <Add />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create Channel</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Complete the form below to create a new channel\n            </DialogContentText>\n            <Grid\n              container\n              spacing={2}\n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={12}>\n                <TextField\n                  autoFocus\n                  margin=\"dense\"\n                  id=\"channelName\"\n                  label=\"Channel Name\"\n                  name=\"channelName\"\n                  fullWidth\n                />\n              </Grid>\n              <Grid container item justify=\"center\" alignItems=\"center\">\n                <Visibility />\n                <FormControlLabel\n                  control={\n                    <Switch\n                      value=\"secret\"\n                      inputProps={{ \"aria-label\": \"Secret\" }}\n                    />\n                  }\n                  label=\"Secret\"\n                  labelPlacement=\"top\"\n                />\n                <VisibilityOff />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddChannelDialog;\n","import React from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader\n} from \"@material-ui/core\";\n\nimport RadioButtonCheckedIcon from \"@material-ui/icons/RadioButtonChecked\";\nimport RadioButtonUncheckedIcon from \"@material-ui/icons/RadioButtonUnchecked\";\nimport AuthContext from \"../AuthContext\";\nimport AddChannelDialog from \"./Channel/AddChannelDialog\";\n\nimport { useStep } from \"../utils/update\";\n\nfunction ChannelList({ channelId: currChannelId }) {\n  const [myChannels, setMyChannels] = React.useState([]);\n  const [allChannels, setAllChannels] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelsData = () => {\n    // fetch channels data\n    const getMyChannels = axios.get(\"/channels/list/v3\", {\n      headers: { token }\n    });\n    const getAllChannels = axios.get(\"/channels/listall/v3\", {\n      headers: { token }\n    });\n\n    axios.all([getMyChannels, getAllChannels]).then(\n      axios.spread((myChannelResponse, allChannelResponse) => {\n        const myChannelData = myChannelResponse.data.channels;\n        const allChannelData = allChannelResponse.data.channels;\n        const filteredChannels = allChannelData.filter(channel => {\n          return (\n            myChannelData.find(c => c.channelId === channel.channelId) ===\n            undefined\n          );\n        });\n        setMyChannels(myChannelData);\n        setAllChannels(filteredChannels);\n      })\n    );\n  };\n\n  useStep(fetchChannelsData, [], 2);\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader style={{ display: \"flex\" }}>\n            <span style={{ flex: 1 }}>My Channels</span>\n            <AddChannelDialog callback={fetchChannelsData} />\n          </ListSubheader>\n        }\n      >\n        {myChannels.map(({ channelId, name }, index) => (\n          <ListItem\n            button\n            key={channelId}\n            component={Link}\n            to={`/channel/${channelId}`}\n          >\n            <ListItemIcon>\n              {channelId == currChannelId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n      <List subheader={<ListSubheader>Other Channels</ListSubheader>}>\n        {allChannels.map(({ channelId, name }, index) => (\n          <ListItem\n            button\n            key={channelId}\n            component={Link}\n            to={`/channel/${channelId}`}\n          >\n            <ListItemIcon>\n              {channelId == currChannelId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </>\n  );\n}\n\nexport default ChannelList;\n","import React from \"react\";\nimport axios from \"axios\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n  Button,\n  Select,\n  Input,\n  MenuItem\n} from \"@material-ui/core\";\nimport Add from \"@material-ui/icons/Add\";\nimport AuthContext from \"../../AuthContext\";\nimport { extractUId } from \"../../utils/token\";\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n};\n\nfunction AddDmDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUsers, setSelectedUsers] = React.useState([]);\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      axios\n        .get(\"/users/all/v2\", {\n          headers: {\n            token\n          }\n        })\n        .then(({ data }) => {\n          setUsers(data[\"users\"]);\n        })\n        .catch(err => {});\n    }\n    fetchUserData();\n  }, [token]);\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleUserSelect(event) {\n    setSelectedUsers(event.target.value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    console.log(selectedUsers);\n\n    axios\n      .post(`/dm/create/v2`, { uIds: selectedUsers }, { headers: { token } })\n      .then(response => {\n        console.log(response);\n        props.callback();\n      })\n      .catch(err => {});\n  }\n  return (\n    <div>\n      <IconButton size=\"small\" onClick={handleClickOpen}>\n        <Add />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create Dm</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Select the users below to create a new dm\n            </DialogContentText>\n            <Select\n              multiple\n              value={selectedUsers}\n              onChange={handleUserSelect}\n              input={<Input />}\n              MenuProps={MenuProps}\n              style={{ width: \"100%\" }}\n            >\n              {users.map(d => {\n                if (uId != d.uId) {\n                  return (\n                    <MenuItem key={d.uId} value={d.uId}>\n                      {d.nameFirst + \" \" + d.nameLast}\n                    </MenuItem>\n                  );\n                }\n              })}\n            </Select>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddDmDialog;\n","import React from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader\n} from \"@material-ui/core\";\n\nimport RadioButtonCheckedIcon from \"@material-ui/icons/RadioButtonChecked\";\nimport RadioButtonUncheckedIcon from \"@material-ui/icons/RadioButtonUnchecked\";\nimport AuthContext from \"../AuthContext\";\nimport AddDmDialog from \"./Dm/AddDmDialog\";\n\nimport { useStep } from \"../utils/update\";\n\nfunction DmList({ dmId: currDmId }) {\n  const [myDms, setMyDms] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchDmsData = () => {\n    axios\n      .get(\"/dm/list/v2\", {\n        headers: { token }\n      })\n      .then(({ data }) => {\n        setMyDms(data[\"dms\"]);\n      })\n      .catch(() => {});\n  };\n\n  useStep(fetchDmsData, [], 2);\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader style={{ display: \"flex\" }}>\n            <span style={{ flex: 1 }}>My Dms</span>\n            <AddDmDialog callback={fetchDmsData} />\n          </ListSubheader>\n        }\n      >\n        {myDms.map(({ dmId, name }) => (\n          <ListItem button key={dmId} component={Link} to={`/dm/${dmId}`}>\n            <ListItemIcon>\n              {dmId == currDmId ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </>\n  );\n}\n\nexport default DmList;\n","import React from \"react\";\nimport ProfileList from \"./ProfileList\";\nimport ChannelList from \"./ChannelList\";\nimport DmList from \"./DmList\";\n\nfunction ProfileChannelLists({ channelId, dmId }) {\n  return (\n    <>\n      <ProfileList />\n      <ChannelList channelId={channelId} />\n      <DmList dmId={dmId} />\n    </>\n  );\n}\n\nexport default ProfileChannelLists;\n","import axios from \"axios\";\nimport React from \"react\";\nimport { Scatter } from \"react-chartjs-2\";\nimport { Typography } from \"@material-ui/core\";\nimport AuthContext from \"../AuthContext\";\n\nfunction WorkspaceStats() {\n  const token = React.useContext(AuthContext);\n  const [utilizationRate, setUtilizationRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  React.useEffect(() => {\n    axios\n      .get(`/users/stats/v1`, { headers: { token } })\n      .then(({ data }) => {\n        console.log(data);\n        const { workspaceStats } = data;\n        setUtilizationRate(workspaceStats[\"utilizationRate\"]);\n        setChannelsData(\n          workspaceStats[\"channelsExist\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numChannelsExist\"]\n            };\n          })\n        );\n        setDmsData(\n          workspaceStats[\"dmsExist\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numDmsExist\"]\n            };\n          })\n        );\n        setMessagesData(\n          workspaceStats[\"messagesExist\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numMessagesExist\"]\n            };\n          })\n        );\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, [token]);\n\n  return (\n    <>\n      <Typography variant=\"h5\">Workspace statistics</Typography>\n      <p>Wow! {(utilizationRate * 100).toFixed(2)}% utilisation</p>\n      <Scatter\n        data={{\n          datasets: [\n            {\n              label: \"Channels\",\n              data: channelsData,\n              fill: false,\n              borderColor: \"#742774\",\n              showLine: true\n            },\n            {\n              label: \"Dms\",\n              data: dmsData,\n              fill: false,\n              borderColor: \"#4287f5\",\n              showLine: true\n            },\n            {\n              label: \"Messages\",\n              data: messagesData,\n              fill: false,\n              borderColor: \"#bd2d4f\",\n              showLine: true\n            }\n          ]\n        }}\n        options={{\n          scales: {\n            xAxes: [\n              {\n                title: \"time\",\n                type: \"time\",\n                gridLines: {\n                  lineWidth: 2\n                },\n                time: {\n                  unitStepSize: 200,\n                  displayFormats: {\n                    millisecond: \"MMM DD HH:mm\",\n                    second: \"MMM DD HH:mm\",\n                    minute: \"MMM DD HH:mm\",\n                    hour: \"MMM DD HH:mm\",\n                    day: \"MMM DD\",\n                    week: \"MMM DD\",\n                    month: \"MMM DD\",\n                    quarter: \"MMM DD\",\n                    year: \"MMM DD\"\n                  }\n                }\n              }\n            ]\n          }\n        }}\n      />\n    </>\n  );\n}\n\nexport default WorkspaceStats;\n","import React from \"react\";\nimport Layout from \"../components/Layout\";\nimport ProfileChannelLists from \"../components/ProfileChannelLists\";\nimport WorkspaceStats from \"../components/WorkspaceStats\";\nimport { Typography } from \"@material-ui/core\";\n\nfunction HomePage() {\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={\n        <>\n          <Typography variant=\"h4\">WELCOME</Typography>\n          <div style={{ paddingTop: 15 }}>\n            <Typography variant=\"body1\">\n              This is Treats: agile messaging for Software Engineers\n            </Typography>\n          </div>\n          <br />\n          <WorkspaceStats />\n        </>\n      }\n    />\n  );\n}\n\nexport default HomePage;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  MenuItem,\n  Select,\n  DialogContentText,\n  Button\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { useStep } from \"../../utils/update\";\n\nfunction AddMemberDialog({ channelId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUser, setSelectedUser] = React.useState(\"\");\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      axios\n        .get(\"/users/all/v2\", {\n          headers: { token }\n        })\n        .then(({ data }) => {\n          setUsers(data[\"users\"]);\n        })\n        .catch(err => {});\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const uId = selectedUser;\n\n    if (uId == null) return;\n\n    axios\n      .post(\n        `/channel/invite/v3`,\n        {\n          uId: Number.parseInt(uId),\n          channelId: Number.parseInt(channelId)\n        },\n        { headers: { token } }\n      )\n      .then(response => {\n        console.log(response);\n        step();\n      })\n      .catch(err => {});\n  }\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        Invite Member\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Invite User</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Select a user below to invite them to this channel\n            </DialogContentText>\n            <Select\n              style={{ width: \"100%\" }}\n              id=\"uId\"\n              onChange={handleUserSelect}\n              value={selectedUser}\n            >\n              {users.map((d, idx) => {\n                return (\n                  <MenuItem key={d.uId} value={d.uId}>\n                    {d.nameFirst} {d.nameLast}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Invite\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMemberDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle\n} from \"@material-ui/core\";\nimport { KeyboardTimePicker } from \"@material-ui/pickers\";\nimport React from \"react\";\n\nfunction AddMessageTimerDialog({ open, handleClose, onTimerChange, ...props }) {\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onTimerChange(selectedDate);\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Send later</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <KeyboardTimePicker\n              margin=\"normal\"\n              id=\"time-picker\"\n              label=\"Time picker\"\n              value={selectedDate}\n              onChange={d => setSelectedDate(d.toDate())}\n              KeyboardButtonProps={{\n                \"aria-label\": \"change time\"\n              }}\n            />\n            <DialogContentText>Enter a time to send</DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Set Time\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMessageTimerDialog;\n","import axios from \"axios\";\nimport {\n  Button,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Typography\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport TimerIcon from \"@material-ui/icons/Timer\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport AuthContext from \"../../AuthContext\";\nimport { StepContext } from \"../Channel/ChannelMessages\";\nimport { StepContextDm } from \"../Dm/DmMessages\";\nimport AddMessageTimerDialog from \"./AddMessageTimerDialog\";\nimport { useInterval } from \"../../utils\";\nimport { useStep } from \"../../utils/update\";\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  input: {\n    margin: theme.spacing(1),\n    marginRight: 0\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0,\n    alignSelf: \"stretch\"\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1)\n  },\n  standupTimer: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst TIMER_INACTIVE_VALUE = -1;\n\nfunction AddMessage({ channelId = -1, dmId = -1 }) {\n  const classes = useStyles();\n  const [currentMessage, setCurrentMessage] = React.useState(\"\");\n  const [currentTimer, setCurrentTimer] = React.useState(TIMER_INACTIVE_VALUE);\n  const [timerDialogOpen, setTimerDialogOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  let onAdd = React.useContext(StepContext);\n  let onAddDm = React.useContext(StepContextDm);\n  onAdd = onAdd ? onAdd : () => {}; // sanity check\n  onAddDm = onAddDm ? onAddDm : () => {}; // sanity check\n\n  const isTimerSet = currentTimer !== TIMER_INACTIVE_VALUE;\n\n  const [standupRemaining, setStandupRemaining] = React.useState();\n  const [standupEndTime, setStandupEndTime] = React.useState();\n\n  const submitMessage = () => {\n    const message = currentMessage.trim();\n    if (!message) return;\n    setCurrentMessage(\"\");\n\n    /**\n     * Sending a message when a standup is active\n     * note: probably makes sense that this takes precedence over\n     *       starting a standup.\n     */\n    if (dmId === -1 && standupRemaining && standupRemaining > 0) {\n      axios\n        .post(\n          `/standup/send/v1`,\n          {\n            channelId: Number.parseInt(channelId),\n            message\n          },\n          { headers: { token } }\n        )\n        .then(({ data }) => {\n          console.log(data);\n          onAdd();\n        })\n        .catch(err => {});\n      return;\n    }\n\n    /**\n     * Sending a message when the sendlater timer has been set\n     */\n    if (isTimerSet) {\n      const route =\n        dmId === -1 ? \"/message/sendlater/v1\" : \"message/sendlaterdm/v1\";\n      axios\n        .post(\n          route,\n          {\n            channelId: Number.parseInt(channelId),\n            dmId: Number.parseInt(dmId),\n            message,\n            timeSent: currentTimer.getTime() / 1000 // ms to s conversion\n          },\n          { headers: { token } }\n        )\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => {});\n      setCurrentTimer(TIMER_INACTIVE_VALUE);\n      return;\n    }\n\n    /**\n     * Starting a standup (any message which starts with /standup)\n     */\n    if (dmId === -1 && message.startsWith(\"/standup\")) {\n      const re = /\\/standup\\s+([1-9][0-9]*)/;\n      const found = message.match(re);\n      if (!found || found.length < 2) {\n        alert(\"Usage: /standup <duration in seconds>\");\n      } else {\n        var length = parseInt(found[1], 10);\n        if (isNaN(length) || !Number.isInteger(length)) {\n          alert(\"Usage: /standup <duration in seconds>\");\n        } else {\n          axios\n            .post(\n              `/standup/start/v1`,\n              {\n                channelId: Number.parseInt(channelId),\n                length\n              },\n              { headers: { token } }\n            )\n            .then(({ data }) => {\n              const { timeFinish } = data;\n              setStandupEndTime(timeFinish);\n              alert(`You've started a standup for ${length} seconds`);\n            })\n            .catch(err => {});\n        }\n      }\n      return;\n    }\n\n    /**\n     * Default message sending behaviour\n     */\n    const route = dmId === -1 ? \"/message/send/v2\" : \"message/senddm/v2\";\n    axios\n      .post(\n        route,\n        {\n          channelId: Number.parseInt(channelId),\n          dmId: Number.parseInt(dmId),\n          message\n        },\n        { headers: { token } }\n      )\n      .then(({ data }) => {\n        console.log(data);\n        onAdd();\n        onAddDm();\n      })\n      .catch(err => {});\n  };\n\n  useInterval(() => {\n    if (standupEndTime > Date.now() / 1000) {\n      setStandupRemaining(() =>\n        Math.round(standupEndTime - Math.round(Date.now() / 1000))\n      );\n    } else {\n      setStandupRemaining();\n    }\n  }, 1000);\n\n  const checkStandupActive = () => {\n    if (channelId === -1) return;\n    axios\n      .get(\"/standup/active/v1\", { params: { channelId }, headers: { token } })\n      .then(({ data }) => {\n        const { isActive = false, timeFinish } = data;\n        if (isActive && timeFinish) {\n          setStandupEndTime(timeFinish);\n        } else {\n          setStandupRemaining(0);\n          setStandupEndTime(-1);\n        }\n      })\n      .catch(err => {});\n  };\n\n  useStep(checkStandupActive, [currentMessage] /* check when user is typing */);\n\n  React.useEffect(checkStandupActive, [channelId]);\n\n  const keyDown = e => {\n    if (e.key === \"Enter\" && !e.getModifierState(\"Shift\")) {\n      e.preventDefault();\n      submitMessage();\n    }\n  };\n\n  return (\n    <>\n      {standupRemaining > 0 && (\n        <Typography variant=\"caption\" className={classes.standupTimer}>\n          {`STANDUP ACTIVE: ${standupRemaining} seconds remaining`}\n        </Typography>\n      )}\n      <div className={classes.flex}>\n        <TextField\n          className={classes.input}\n          label=\"Send a message \"\n          multiline\n          placeholder=\"...\"\n          fullWidth\n          margin=\"normal\"\n          variant=\"filled\"\n          onKeyDown={keyDown}\n          value={currentMessage}\n          onChange={e => setCurrentMessage(e.target.value)}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle visibility\"\n                  disabled={standupRemaining > 0}\n                  onClick={() =>\n                    isTimerSet ? setCurrentTimer(-1) : setTimerDialogOpen(true)\n                  }\n                >\n                  <TimerIcon color={isTimerSet ? \"secondary\" : undefined} />\n                </IconButton>\n              </InputAdornment>\n            )\n          }}\n        />\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={submitMessage}\n        >\n          Send\n          <SendIcon className={classes.rightIcon} />\n        </Button>\n      </div>\n      <AddMessageTimerDialog\n        open={timerDialogOpen}\n        handleClose={() => setTimerDialogOpen(false)}\n        onTimerChange={setCurrentTimer}\n      />\n    </>\n  );\n}\n\nexport default AddMessage;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport { List, ListSubheader, Button, ListItem } from \"@material-ui/core\";\nimport { useStep } from \"../../utils/update\";\nimport Message from \"../Message\";\nimport AuthContext from \"../../AuthContext\";\nimport AddMessage from \"../Message/AddMessage\";\nimport { PAGINATION_SIZE, SLICE_SIZE } from \"../../utils/constants\";\n\nexport const StepContextDm = React.createContext();\nexport const StepProvider = StepContextDm.Provider;\nexport const StepConsumer = StepContextDm.Consumer;\n\nfunction DmMessages({ dmId = \"\" }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    dmId: dmId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchDmMessages = () => {\n    const p =\n      pagination.dmId === dmId\n        ? pagination\n        : {\n            dmId: dmId,\n            isPaginating: false,\n            currentStart: 0,\n            currentEnd: 0,\n            sliceStart: 0\n          };\n    axios\n      .get(\"/dm/messages/v2\", {\n        params: {\n          dmId: Number.parseInt(dmId),\n          start: p.isPaginating ? p.currentStart : 0\n        },\n        headers: { token }\n      })\n      .then(({ data }) => {\n        const { messages: newMessages, start, end } = data;\n        setPagination({ ...p, dmId: dmId, currentEnd: end }); // TODO: add/remove problems\n        setMessages(newMessages);\n      })\n      .catch(err => {});\n  };\n  useStep(fetchDmMessages, [dmId, pagination.currentStart]);\n\n  const onPrev = () =>\n    setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n      const pageSize = messages.length;\n\n      if (sliceStart + SLICE_SIZE < pageSize) {\n        return {\n          ...pagination,\n          currentStart,\n          currentEnd,\n          sliceStart: sliceStart + SLICE_SIZE,\n          isPaginating: true\n        };\n      }\n\n      return {\n        ...pagination,\n        currentEnd,\n        currentStart: currentEnd,\n        sliceStart: 0,\n        isPaginating: true\n      };\n    });\n\n  const onNext = () =>\n    setPagination(({ sliceStart, currentStart, ...pagination }) => {\n      if (sliceStart >= SLICE_SIZE) {\n        return {\n          ...pagination,\n          currentStart,\n          sliceStart: sliceStart - SLICE_SIZE,\n          isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE)\n        };\n      }\n\n      if (currentStart >= PAGINATION_SIZE) {\n        if (currentStart)\n          return {\n            ...pagination,\n            currentStart: currentStart - PAGINATION_SIZE,\n            sliceStart: PAGINATION_SIZE - SLICE_SIZE\n          };\n      }\n\n      return {\n        ...pagination,\n        currentStart: 0,\n        sliceStart: 0,\n        isPaginating: false\n      };\n    });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n    ? `Messages (None)`\n    : `Messages [${currentStart + sliceStart + 1}...${Math.min(\n        currentStart + messages.length,\n        currentStart + sliceStart + SLICE_SIZE\n      )}]`;\n\n  return (\n    <StepProvider value={fetchDmMessages}>\n      {pinnedMessages.length > 0 && (\n        <>\n          <hr />\n          <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n            {pinnedMessages.map(m => (\n              <Message key={m.messageId} {...m} />\n            ))}\n          </List>\n        </>\n      )}\n      <hr />\n      <List\n        subheader={<ListSubheader>{subheader}</ListSubheader>}\n        style={{ width: \"100%\" }}\n      >\n        {!isEnd && (\n          <ListItem>\n            <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n              Previous messages\n            </Button>\n          </ListItem>\n        )}\n        {messages\n          .slice(sliceStart, sliceStart + SLICE_SIZE)\n          .reverse()\n          .map(message => (\n            <Message key={message.messageId} {...message} />\n          ))}\n        {isPaginating && (\n          <ListItem>\n            <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>\n              Next messages\n            </Button>\n          </ListItem>\n        )}\n      </List>\n      <AddMessage dmId={dmId} />\n    </StepProvider>\n  );\n}\n\nexport default DmMessages;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport MdiIcon from \"@mdi/react\";\nimport { mdiPin, mdiPinOutline } from \"@mdi/js\";\nimport { IconButton } from \"@material-ui/core\";\n\nimport { withTheme } from \"@material-ui/styles\";\n\nimport AuthContext from \"../../AuthContext\";\nimport { StepContext } from \"../Channel/ChannelMessages\";\nimport { StepContextDm } from \"../Dm/DmMessages\";\n\nfunction MessagePin({ messageId, isPinned = false, theme }) {\n  const [isPinnedState, setIsPinnedState] = React.useState(isPinned);\n  React.useEffect(() => setIsPinnedState(isPinned), [isPinned]);\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const toggle = () => {\n    if (isPinnedState) {\n      axios\n        .post(\n          `/message/unpin/v1`,\n          {\n            messageId: Number.parseInt(messageId)\n          },\n          { headers: { token } }\n        )\n        .then(() => {\n          step();\n          stepDm();\n        });\n    } else {\n      axios\n        .post(\n          `/message/pin/v1`,\n          {\n            messageId: Number.parseInt(messageId)\n          },\n          { headers: { token } }\n        )\n        .then(() => {\n          step();\n          stepDm();\n        });\n    }\n    // Optimistic re-rendering\n    // setIsPinned(isPinnedState => !!!isPinnedState);\n  };\n\n  return (\n    <IconButton\n      onClick={toggle}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      {isPinnedState ? (\n        <MdiIcon\n          path={mdiPin}\n          size=\"1em\"\n          color={theme && theme.palette.action.active}\n        />\n      ) : (\n        <MdiIcon\n          path={mdiPinOutline}\n          size=\"1em\"\n          color={theme && theme.palette.action.active}\n        />\n      )}\n    </IconButton>\n  );\n}\n\nexport default withTheme(MessagePin);\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport { Badge, IconButton } from \"@material-ui/core\";\n\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\nimport ThumbUpOutlinedIcon from \"@material-ui/icons/ThumbUpOutlined\";\n\nimport AuthContext from \"../../AuthContext\";\nimport { StepContext } from \"../Channel/ChannelMessages\";\nimport { StepContextDm } from \"../Dm/DmMessages\";\n\nfunction MessageReact({ messageId, reacts = [] /* [{ reactId, uIds }] */ }) {\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageReact = isReacted => {\n    if (isReacted) {\n      axios\n        .post(\n          `/message/unreact/v1`,\n          {\n            messageId: Number.parseInt(messageId),\n            reactId: 1 /* FIXME */\n          },\n          { headers: { token } }\n        )\n        .then(() => {\n          step();\n          stepDm();\n        });\n    } else {\n      axios\n        .post(\n          `/message/react/v1`,\n          {\n            messageId: Number.parseInt(messageId),\n            reactId: 1 /* FIXME */\n          },\n          { headers: { token } }\n        )\n        .then(() => {\n          step();\n          stepDm();\n        });\n    }\n  };\n\n  let thumbUpCount = 0;\n  let isReacted = false;\n  const thumbUpIndex = reacts.findIndex(react => react.reactId === 1);\n  if (thumbUpIndex !== -1) {\n    thumbUpCount = reacts[thumbUpIndex].uIds.length;\n    isReacted = reacts[thumbUpIndex].isThisUserReacted;\n  }\n\n  return (\n    <Badge\n      anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\n      badgeContent={thumbUpCount}\n      color=\"secondary\"\n    >\n      <IconButton\n        onClick={() => messageReact(isReacted)}\n        style={{ margin: 1 }}\n        size=\"small\"\n        edge=\"end\"\n        aria-label=\"delete\"\n      >\n        {isReacted ? (\n          <ThumbUpIcon fontSize=\"small\" />\n        ) : (\n          <ThumbUpOutlinedIcon fontSize=\"small\" />\n        )}\n      </IconButton>\n    </Badge>\n  );\n}\n\nexport default MessageReact;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport { IconButton } from \"@material-ui/core\";\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nimport AuthContext from \"../../AuthContext\";\nimport { StepContext } from \"../Channel/ChannelMessages\";\nimport { StepContextDm } from \"../Dm/DmMessages\";\n\nfunction MessageRemove({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageRemove = () => {\n    axios\n      .delete(`/message/remove/v2`, {\n        headers: { token },\n        params: {\n          messageId: Number.parseInt(messageId)\n        }\n      })\n      .then(() => {\n        step();\n        stepDm();\n      });\n  };\n\n  return (\n    <IconButton\n      disabled={disabled}\n      onClick={messageRemove}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      <DeleteIcon fontSize=\"small\" />\n    </IconButton>\n  );\n}\n\nexport default MessageRemove;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport { IconButton } from \"@material-ui/core\";\n\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nimport AuthContext from \"../../AuthContext\";\nimport { StepContext } from \"../Channel/ChannelMessages\";\nimport { StepContextDm } from \"../Dm/DmMessages\";\n\nfunction MessageEdit({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageEdit = () => {\n    const message = prompt();\n    if (message === null) return; // basic validation\n\n    /**\n     * Empty message should delete original\n     */\n    if (message === \"\") {\n      axios\n        .delete(`/message/remove/v2`, {\n          headers: { token },\n          params: {\n            messageId: Number.parseInt(messageId)\n          }\n        })\n        .then(() => {\n          step();\n          stepDm();\n        });\n      return;\n    }\n\n    /**\n     * Default message edit behaviour\n     */\n    axios\n      .put(\n        `/message/edit/v2`,\n        { messageId: Number.parseInt(messageId), message },\n        { headers: { token } }\n      )\n      .then(() => {\n        step();\n        stepDm();\n      });\n  };\n\n  return (\n    <IconButton\n      disabled={disabled}\n      onClick={messageEdit}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      <EditIcon fontSize=\"small\" />\n    </IconButton>\n  );\n}\n\nexport default MessageEdit;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  MenuItem,\n  Select,\n  DialogContentText,\n  Button,\n  IconButton,\n  TextField\n} from \"@material-ui/core\";\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\";\n\nimport AuthContext from \"../../AuthContext\";\nimport { useStep } from \"../../utils/update\";\n\nfunction MessageShareDialog({ ogMessageId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedChannel, setSelectedChannel] = React.useState(-1);\n  const [selectedDm, setSelectedDm] = React.useState(-1);\n  const [selectedChDm, setSelectedChDm] = React.useState(\"\");\n  const [channelsShare, setChannelsShare] = React.useState([]);\n  const [dmsShare, setDmsShare] = React.useState([]);\n  const [message, setMessage] = React.useState(\"\");\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchChannelData() {\n      axios\n        .get(\"channels/list/v3\", {\n          headers: {\n            token\n          }\n        })\n        .then(({ data }) => {\n          setChannelsShare(data[\"channels\"]);\n        })\n        .catch(err => {});\n      axios\n        .get(\"dm/list/v2\", {\n          headers: {\n            token\n          }\n        })\n        .then(({ data }) => {\n          setDmsShare(data[\"dms\"]);\n        })\n        .catch(err => {});\n    }\n    fetchChannelData();\n  }, [token]);\n\n  const handleChannelSelect = event => {\n    setSelectedChDm(event.target.value);\n    if (event.target.value.slice(0, 1) === \"d\") {\n      setSelectedDm(event.target.value.slice(1));\n      setSelectedChannel(-1);\n    } else {\n      setSelectedChannel(event.target.value.slice(1));\n      setSelectedDm(-1);\n    }\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  const handleChange = event => {\n    setMessage(event.target.value);\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    axios\n      .post(\n        `/message/share/v1`,\n        {\n          ogMessageId: Number.parseInt(ogMessageId),\n          message,\n          channelId: Number.parseInt(selectedChannel),\n          dmId: Number.parseInt(selectedDm)\n        },\n        { headers: { token } }\n      )\n      .then(response => {\n        console.log(response);\n        step();\n      })\n      .catch(err => {});\n  }\n  return (\n    <div>\n      <IconButton\n        onClick={handleClickOpen}\n        style={{ margin: 1 }}\n        size=\"small\"\n        edge=\"end\"\n        aria-label=\"share\"\n      >\n        <ArrowForwardIcon fontSize=\"small\" />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Share message</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Enter a channel below to share the message to\n            </DialogContentText>\n            <Select\n              style={{ width: \"100%\" }}\n              id=\"u_id\"\n              onChange={handleChannelSelect}\n              value={selectedChDm}\n            >\n              {channelsShare.map(d => {\n                return (\n                  <MenuItem key={d.channelId} value={`c${d.channelId}`}>\n                    {d.name}\n                  </MenuItem>\n                );\n              })}\n              {dmsShare.map(d => {\n                return (\n                  <MenuItem key={d.dmId} value={`d${d.dmId}`}>\n                    {d.name}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n            <br />\n            <br />\n            <DialogContentText>\n              Optionally, enter an additional message\n            </DialogContentText>\n            <TextField\n              multiline\n              fullWidth\n              rowsMax={4}\n              value={message}\n              onChange={handleChange}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Share\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default MessageShareDialog;\n","import React from \"react\";\nimport timeago from \"epoch-timeago\";\nimport axios from \"axios\";\n\nimport {\n  Avatar,\n  ListItem,\n  ListItemAvatar,\n  ListItemText\n} from \"@material-ui/core\";\n\nimport AuthContext from \"../../AuthContext\";\nimport MessagePin from \"./MessagePin\";\nimport MessageReact from \"./MessageReact\";\nimport MessageRemove from \"./MessageRemove\";\nimport MessageEdit from \"./MessageEdit\";\nimport MessageShareDialog from \"./MessageShareDialog\";\n\nimport { isMatchingId } from \"../../utils\";\nimport { extractUId } from \"../../utils/token\";\n\nfunction Message({\n  messageId,\n  message = \"\",\n  uId,\n  timeSent,\n  isUnread = false,\n  isPinned = false,\n  reacts = [] /* [{ reactId, uIds }] */\n}) {\n  const [nameFirst, setNameFirst] = React.useState();\n  const [nameLast, setNameLast] = React.useState();\n  const [imgUrl, setImgUrl] = React.useState();\n  const token = React.useContext(AuthContext);\n  const isUser = isMatchingId(uId, extractUId(token));\n\n  const fullName = [nameFirst, nameLast]\n    .filter(s => s != null && s !== \"\")\n    .join(\" \");\n  const initials = [nameFirst, nameLast]\n    .filter(s => s != null && s !== \"\")\n    .map(s => s[0])\n    .join(\"\");\n  const msgToList = msg => msg.split(\"\\n\");\n\n  React.useEffect(() => {\n    setNameFirst();\n    setNameLast();\n    setImgUrl();\n    axios\n      .get(`/user/profile/v3`, {\n        params: {\n          uId\n        },\n        headers: { token }\n      })\n      .then(({ data }) => {\n        const {\n          user: {\n            email = \"\",\n            nameFirst = \"\",\n            nameLast = \"\",\n            handleStr = \"\",\n            profileImgUrl = \"\"\n          }\n        } = data;\n        setNameFirst(nameFirst);\n        setNameLast(nameLast);\n        setImgUrl(`${profileImgUrl}`);\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, [messageId, token, uId]);\n\n  return (\n    <ListItem key={messageId} style={{ width: \"100%\" }}>\n      {message && (\n        <>\n          <ListItemAvatar>\n            <Avatar\n              style={{\n                width: \"50px\",\n                height: \"50px\",\n                border: \"1px solid #ccc\"\n              }}\n              src={imgUrl}\n            >\n              {initials}\n            </Avatar>\n          </ListItemAvatar>\n          <div\n            style={{\n              display: \"flex\",\n              width: \"100%\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            }}\n          >\n            <ListItemText\n              primary={\n                <>\n                  <span>{fullName}</span>\n                  <span style={{ paddingLeft: 10, fontSize: 10 }}>\n                    {timeago(timeSent * 1000)}\n                  </span>\n                </>\n              }\n              secondary={\n                <div>\n                  <pre style={{ fontFamily: \"inherit\" }}>{message}</pre>\n                </div>\n              }\n            />\n            <div style={{ display: \"flex\", height: 30, marginLeft: 20 }}>\n              <MessageReact messageId={messageId} reacts={reacts} uId={uId} />\n              <MessagePin messageId={messageId} isPinned={isPinned} />\n              <MessageShareDialog ogMessageId={messageId} />\n              <MessageEdit\n                messageId={messageId}\n                // disabled={!isUser} /* We have no way of checking admin status */\n              />\n              <MessageRemove\n                messageId={messageId}\n                // disabled={!isUser} /* We have no way of checking admin status */\n              />\n            </div>\n          </div>\n        </>\n      )}\n    </ListItem>\n  );\n}\n\nexport default Message;\n","import React from \"react\";\nimport axios from \"axios\";\n\nimport { List, ListSubheader, Button, ListItem } from \"@material-ui/core\";\nimport { useStep } from \"../../utils/update\";\nimport Message from \"../Message\";\nimport AuthContext from \"../../AuthContext\";\nimport AddMessage from \"../Message/AddMessage\";\nimport { PAGINATION_SIZE, SLICE_SIZE } from \"../../utils/constants\";\n\nexport const StepContext = React.createContext();\nexport const StepProvider = StepContext.Provider;\nexport const StepConsumer = StepContext.Consumer;\n\nfunction ChannelMessages({ channelId = \"\" }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    channelId: channelId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelMessages = () => {\n    const p =\n      pagination.channelId === channelId\n        ? pagination\n        : {\n            channelId: channelId,\n            isPaginating: false,\n            currentStart: 0,\n            currentEnd: 0,\n            sliceStart: 0\n          };\n    axios\n      .get(\"/channel/messages/v3\", {\n        params: {\n          channelId: Number.parseInt(channelId),\n          start: p.isPaginating ? p.currentStart : 0\n        },\n        headers: { token }\n      })\n      .then(({ data }) => {\n        const { messages: newMessages, end } = data;\n        setPagination({ ...p, channelId: channelId, currentEnd: end }); // TODO: add/remove problems\n        setMessages(newMessages);\n      })\n      .catch(err => {});\n  };\n  useStep(fetchChannelMessages, [channelId, pagination.currentStart]);\n\n  const onPrev = () =>\n    setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n      const pageSize = messages.length;\n\n      if (sliceStart + SLICE_SIZE < pageSize) {\n        return {\n          ...pagination,\n          currentStart,\n          currentEnd,\n          sliceStart: sliceStart + SLICE_SIZE,\n          isPaginating: true\n        };\n      }\n\n      return {\n        ...pagination,\n        currentEnd,\n        currentStart: currentEnd,\n        sliceStart: 0,\n        isPaginating: true\n      };\n    });\n\n  const onNext = () =>\n    setPagination(({ sliceStart, currentStart, ...pagination }) => {\n      if (sliceStart >= SLICE_SIZE) {\n        return {\n          ...pagination,\n          currentStart,\n          sliceStart: sliceStart - SLICE_SIZE,\n          isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE)\n        };\n      }\n\n      if (currentStart >= PAGINATION_SIZE) {\n        if (currentStart)\n          return {\n            ...pagination,\n            currentStart: currentStart - PAGINATION_SIZE,\n            sliceStart: PAGINATION_SIZE - SLICE_SIZE\n          };\n      }\n\n      return {\n        ...pagination,\n        currentStart: 0,\n        sliceStart: 0,\n        isPaginating: false\n      };\n    });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n    ? `Messages (None)`\n    : `Messages [${currentStart + sliceStart + 1}...${Math.min(\n        currentStart + messages.length,\n        currentStart + sliceStart + SLICE_SIZE\n      )}]`;\n\n  return (\n    <StepProvider value={fetchChannelMessages}>\n      {pinnedMessages.length > 0 && (\n        <>\n          <hr />\n          <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n            {pinnedMessages.map(m => (\n              <Message key={m.messageId} {...m} />\n            ))}\n          </List>\n        </>\n      )}\n      <hr />\n      <List\n        subheader={<ListSubheader>{subheader}</ListSubheader>}\n        style={{ width: \"100%\" }}\n      >\n        {!isEnd && (\n          <ListItem>\n            <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n              Previous messages\n            </Button>\n          </ListItem>\n        )}\n        {messages\n          .slice(sliceStart, sliceStart + SLICE_SIZE)\n          .reverse()\n          .map(message => (\n            <Message key={message.messageId} {...message} />\n          ))}\n        {isPaginating && (\n          <ListItem>\n            <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>\n              Next messages\n            </Button>\n          </ListItem>\n        )}\n      </List>\n      <AddMessage channelId={channelId} />\n    </StepProvider>\n  );\n}\n\nexport default ChannelMessages;\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nfunction Placeholder() {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n      }}\r\n    >\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Placeholder;\r\n","import {\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n  Button,\n  Grid,\n  Link,\n  IconButton\n} from \"@material-ui/core\";\nimport PersonAdd from \"@material-ui/icons/PersonAdd\";\nimport PersonAddDisabled from \"@material-ui/icons/PersonAddDisabled\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport AddMemberDialog from \"./AddMemberDialog\";\nimport ChannelMessages from \"./ChannelMessages\";\nimport AuthContext from \"../../AuthContext\";\nimport { extractUId } from \"../../utils/token\";\nimport { isMatchingId } from \"../../utils\";\nimport { useStep } from \"../../utils/update\";\nimport Placeholder from \"../Placeholder\";\n\nfunction Channel({ channelId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState(\"\");\n  const [members, setMembers] = React.useState([]);\n  const [owners, setOwners] = React.useState([]);\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  function fetchChannelData() {\n    axios\n      .get(\"/channel/details/v3\", {\n        params: { channelId },\n        headers: { token }\n      })\n      .then(({ data }) => {\n        const { name, ownerMembers, allMembers } = data;\n        // assumes members of form [{ uId, nameFirst, nameLast }]\n        setMembers(allMembers);\n        setOwners(ownerMembers);\n        setName(name);\n      })\n      .catch(err => {\n        setMembers([]);\n        setOwners([]);\n        setName(\"\");\n      })\n      .finally(() => setLoading(false));\n  }\n\n  useStep(fetchChannelData, [channelId, token], 2);\n\n  function joinChannel(channelId, token) {\n    axios\n      .post(\n        \"/channel/join/v3\",\n        {\n          channelId: Number.parseInt(channelId)\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch(err => {});\n  }\n\n  function leaveChannel(channelId, token) {\n    axios\n      .post(\n        \"/channel/leave/v2\",\n        {\n          channelId: Number.parseInt(channelId)\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch(err => {});\n  }\n\n  function addOwner(uId) {\n    axios\n      .post(\n        \"/channel/addowner/v2\",\n        {\n          channelId: Number.parseInt(channelId),\n          uId: Number.parseInt(uId)\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch(err => {});\n  }\n\n  function removeOwner(uId) {\n    axios\n      .post(\n        \"/channel/removeowner/v2\",\n        {\n          channelId: Number.parseInt(channelId),\n          uId: Number.parseInt(uId)\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        fetchChannelData(channelId, token);\n      })\n      .catch(err => {});\n  }\n\n  function userIsMember(members) {\n    return members.find(member => isMatchingId(member.uId, uId)) !== undefined;\n  }\n\n  function userIsOwner(owners, uId) {\n    return owners.find(owner => isMatchingId(owner.uId, uId)) !== undefined;\n  }\n\n  const viewerIsMember = userIsMember(members);\n\n  return (\n    <>\n      {loading ? (\n        <Placeholder />\n      ) : (\n        <>\n          <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n          <List subheader={<ListSubheader>Members</ListSubheader>}>\n            {members.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n              <ListItem key={uId}>\n                <ListItemAvatar>\n                  <Avatar\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      border: \"1px solid #ccc\"\n                    }}\n                    src={profileImgUrl}\n                  >\n                    {[nameFirst, nameLast]\n                      .filter(s => s != null && s !== \"\")\n                      .map(s => s[0])\n                      .join(\"\")}\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <>\n                      <Grid container alignItems=\"center\" spacing={1}>\n                        <Grid item>\n                          <Link\n                            href={`/profile/${uId}`}\n                          >{`${nameFirst} ${nameLast}`}</Link>\n                          {`${userIsOwner(owners, uId) ? \" \" : \" \"}`}\n                        </Grid>\n                        <Grid item>\n                          {userIsOwner(owners, uId) ? (\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => removeOwner(uId)}\n                            >\n                              <PersonAddDisabled />\n                            </IconButton>\n                          ) : (\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => addOwner(uId)}\n                            >\n                              <PersonAdd />\n                            </IconButton>\n                          )}\n                        </Grid>\n                      </Grid>\n                    </>\n                  }\n                />\n              </ListItem>\n            ))}\n            <ListItem key=\"invite_member\">\n              {userIsMember(members) ? (\n                <Grid container spacing={1}>\n                  <Grid item>\n                    <AddMemberDialog channelId={channelId} />\n                  </Grid>\n                  <Grid item>\n                    <Button\n                      variant=\"outlined\"\n                      onClick={() => leaveChannel(channelId, token)}\n                    >\n                      Leave Channel\n                    </Button>\n                  </Grid>\n                </Grid>\n              ) : (\n                <Button\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={() => joinChannel(channelId, token)}\n                >\n                  Join Channel\n                </Button>\n              )}\n            </ListItem>\n          </List>\n          {viewerIsMember && <ChannelMessages channelId={channelId} />}\n        </>\n      )}\n    </>\n  );\n}\n\nexport default Channel;\n","import React from \"react\";\nimport Layout from \"../components/Layout\";\nimport ProfileChannelLists from \"../components/ProfileChannelLists\";\nimport Channel from \"../components/Channel\";\n\nfunction ChannelPage({ match }) {\n  const { channelId } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists channelId={channelId} dmId={null} />}\n      body={<Channel channelId={channelId} />}\n    />\n  );\n}\n\nexport default ChannelPage;\n","import {\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n  Button,\n  Grid,\n  Link\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport DmMessages from \"./DmMessages\";\nimport AuthContext from \"../../AuthContext\";\nimport { useStep } from \"../../utils/update\";\nimport Placeholder from \"../Placeholder\";\n\nfunction Dm({ dmId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState(\"\");\n  const [membersList, setMembersList] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  function fetchDmData() {\n    axios\n      .get(\"/dm/details/v2\", {\n        params: {\n          dmId: dmId\n        },\n        headers: { token }\n      })\n      .then(({ data }) => {\n        const { name, members } = data;\n        // assumes members of form [{ uId, nameFirst, nameLast }]\n        console.log(members);\n        setMembersList(members);\n        setName(name);\n      })\n      .catch(err => {\n        setMembersList([]);\n        setName(\"\");\n      })\n      .finally(() => setLoading(false));\n  }\n\n  useStep(fetchDmData, [dmId, token], 2);\n\n  function leaveDm(dmId, token) {\n    axios\n      .post(\n        \"/dm/leave/v2\",\n        {\n          dmId: Number.parseInt(dmId)\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        fetchDmData(dmId, token);\n      })\n      .catch(err => {});\n  }\n\n  function removeDm(dmId, token) {\n    axios\n      .delete(`/dm/remove/v2`, {\n        headers: { token },\n        params: {\n          dmId: Number.parseInt(dmId)\n        }\n      })\n      .then(() => {\n        fetchDmData(dmId, token);\n      })\n      .catch(err => {});\n  }\n\n  return (\n    <>\n      {loading ? (\n        <Placeholder />\n      ) : (\n        <>\n          <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n          <List subheader={<ListSubheader>Members</ListSubheader>}>\n            {membersList.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n              <ListItem key={uId}>\n                <ListItemAvatar>\n                  <Avatar\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      border: \"1px solid #ccc\"\n                    }}\n                    src={profileImgUrl}\n                  >\n                    {[nameFirst, nameLast]\n                      .filter(s => s != null && s !== \"\")\n                      .map(s => s[0])\n                      .join(\"\")}\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <>\n                      <Grid container alignItems=\"center\" spacing={1}>\n                        <Grid item>\n                          <Link\n                            href={`/profile/${uId}`}\n                          >{`${nameFirst} ${nameLast}`}</Link>\n                        </Grid>\n                      </Grid>\n                    </>\n                  }\n                />\n              </ListItem>\n            ))}\n            <ListItem key=\"leave_dm\">\n              <Grid container spacing={1}>\n                <Grid item>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => leaveDm(dmId, token)}\n                  >\n                    Leave Dm\n                  </Button>\n                  &nbsp;\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => removeDm(dmId, token)}\n                  >\n                    Remove Dm\n                  </Button>\n                </Grid>\n              </Grid>\n            </ListItem>\n          </List>\n          <DmMessages dmId={dmId} />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default Dm;\n","import React from \"react\";\nimport Layout from \"../components/Layout\";\nimport ProfileChannelLists from \"../components/ProfileChannelLists\";\nimport Dm from \"../components/Dm\";\n\nfunction DmPage({ match }) {\n  const { dmId } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists channelId={null} dmId={dmId} />}\n      body={<Dm dmId={dmId} />}\n    />\n  );\n}\n\nexport default DmPage;\n","import axios from \"axios\";\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography\n} from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport React from \"react\";\nimport \"../App.css\";\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.primary.light\n    }\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    borderRadius: theme.shape.borderRadius\n  }\n}));\n\nfunction LoginPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n    const password = event.target[2].value;\n\n    // Quick validation\n    if (!email || !password) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios\n      .post(`/auth/login/v3`, { email, password })\n      .then(response => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.authUserId);\n        props.history.push(\"/\");\n      })\n      .catch(err => {})\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Login\n        </Typography>\n        {loading ? (\n          <div style={{ marginTop: \"64px\" }}>\n            <Placeholder />\n          </div>\n        ) : (\n          <form noValidate onSubmit={handleSubmit}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"text\"\n              autoFocus\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n            />\n            <div className=\"password-warning\">\n              Passwords are not securely stored.\n              <br />\n              Do not enter any currently used passwords.\n            </div>\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n              Sign In\n            </Button>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Grid item>\n                <br />\n                <Link href=\"/register\" variant=\"body1\">\n                  {\"Don't have an account? Register\"}\n                </Link>\n              </Grid>\n              <Grid item>\n                <br />\n                <Link href=\"/forgot_password\" variant=\"body1\">\n                  Forgot password?\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        )}\n      </Box>\n    </Container>\n  );\n}\n\nexport default LoginPage;\n","import axios from \"axios\";\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography\n} from \"@material-ui/core\";\nimport DeveloperOutlinedIcon from \"@material-ui/icons/DeveloperModeOutlined\";\nimport React from \"react\";\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.primary.light\n    }\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    borderRadius: theme.shape.borderRadius\n  }\n}));\n\nfunction RegisterPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n  const [values, setValues] = React.useState({\n    nameFirst: \"\",\n    nameLast: \"\",\n    email: \"\",\n    password: \"\"\n  });\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Quick validation\n    if (!values.email || !values.password) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios\n      .post(`/auth/register/v3`, { ...values })\n      .then(response => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.authUserId);\n        props.history.push(\"/\");\n      })\n      .catch(err => {})\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Register\n        </Typography>\n        {loading ? (\n          <div style={{ marginTop: \"64px\" }}>\n            <Placeholder />\n          </div>\n        ) : (\n          <form noValidate onSubmit={handleSubmit}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"nameFirst\"\n              label=\"First name\"\n              name=\"nameFirst\"\n              type=\"text\"\n              autoFocus\n              value={values.nameFirst}\n              onChange={handleChange(\"nameFirst\")}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"nameLast\"\n              label=\"Last name\"\n              name=\"nameLast\"\n              type=\"text\"\n              value={values.nameLast}\n              onChange={handleChange(\"nameLast\")}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              value={values.email}\n              onChange={handleChange(\"email\")}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={values.password}\n              onChange={handleChange(\"password\")}\n            />\n            <div className=\"password-warning\">\n              Passwords are not securely stored.\n              <br />\n              Do not enter any currently used passwords.\n            </div>\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n              Sign Up\n            </Button>\n            <Grid container>\n              <Grid item>\n                <br />\n                <Link href=\"/login\" variant=\"body1\">\n                  {\"Already have an account? Login\"}\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        )}\n      </Box>\n    </Container>\n  );\n}\n\nexport default RegisterPage;\n","import axios from \"axios\";\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography\n} from \"@material-ui/core\";\nimport DeveloperOutlinedIcon from \"@material-ui/icons/DeveloperModeOutlined\";\nimport React from \"react\";\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.primary.light\n    }\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    borderRadius: theme.shape.borderRadius\n  }\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n\n    // Quick validation\n    if (!email) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios\n      .post(`/auth/passwordreset/request/v1`, { email })\n      .then(response => {\n        console.log(response);\n        props.history.push(\"/reset_password\");\n      })\n      .catch(err => {})\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Forgot Password\n        </Typography>\n        {loading ? (\n          <div style={{ marginTop: \"64px\" }}>\n            <Placeholder />\n          </div>\n        ) : (\n          <form noValidate onSubmit={handleSubmit}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              autoFocus\n            />\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n              Send Recovery Email\n            </Button>\n            <Grid container>\n              <Grid item>\n                <br />\n                <Link href=\"/login\" variant=\"body1\">\n                  {\"Remember your password? Login\"}\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        )}\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import axios from \"axios\";\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography\n} from \"@material-ui/core\";\nimport DeveloperOutlinedIcon from \"@material-ui/icons/DeveloperModeOutlined\";\nimport React from \"react\";\nimport Placeholder from \"../components/Placeholder\";\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.primary.light\n    }\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    borderRadius: theme.shape.borderRadius\n  }\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const resetCode = event.target[0].value;\n    const newPassword = event.target[2].value;\n\n    // Quick validation\n    if (!resetCode || !newPassword) return;\n\n    setLoading(true);\n\n    // Send to backend\n    axios\n      .post(`/auth/passwordreset/reset/v1`, { resetCode, newPassword })\n      .then(response => {\n        console.log(response);\n        props.history.push(\"/login\");\n      })\n      .catch(err => {})\n      .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Reset Password\n        </Typography>\n        {loading ? (\n          <div style={{ marginTop: \"64px\" }}>\n            <Placeholder />\n          </div>\n        ) : (\n          <form noValidate onSubmit={handleSubmit}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"resetCode\"\n              label=\"Reset code\"\n              name=\"resetCode\"\n              type=\"text\"\n              autoFocus\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"newPassword\"\n              label=\"New Password\"\n              name=\"newPassword\"\n              type=\"password\"\n            />\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n              Change Password\n            </Button>\n            <Grid container>\n              <Grid item>\n                <br />\n                <Link href=\"/login\" variant=\"body1\">\n                  {\"Remember your password? Login\"}\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        )}\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import React from \"react\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport Cancel from \"@material-ui/icons/Cancel\";\nimport Save from \"@material-ui/icons/Save\";\nimport { Grid } from \"@material-ui/core\";\n\nfunction EditableFields({\n  editable,\n  master,\n  masterValue,\n  slaves,\n  slaveValues,\n  onSave,\n  ...props\n}) {\n  const [edit, setEdit] = React.useState(false);\n  const [prevMasterValue, setPrevMasterValue] = React.useState();\n  const [currMasterValue, setCurrMasterValue] = React.useState(masterValue);\n  const [prevSlaveValues, setPrevSlaveValues] = React.useState([]);\n  const [currSlaveValues, setCurrSlaveValues] = React.useState(slaveValues);\n\n  // Handle async passing of master/slave values\n  React.useEffect(() => {\n    setCurrMasterValue(masterValue);\n    setCurrSlaveValues(slaveValues);\n  }, [masterValue, slaveValues]);\n\n  function toggleEdit() {\n    setPrevMasterValue(currMasterValue);\n    setPrevSlaveValues(currSlaveValues);\n    setEdit(!edit);\n  }\n\n  function icons() {\n    if (!editable) return null;\n    if (edit) {\n      return (\n        <>\n          <Save\n            style={{ cursor: \"pointer\" }}\n            onClick={() => {\n              if (currMasterValue == null) return;\n              if (onSave) {\n                if (currSlaveValues) {\n                  onSave(currMasterValue, ...currSlaveValues);\n                } else {\n                  onSave(currMasterValue);\n                }\n              }\n              toggleEdit();\n            }}\n          />\n          <Cancel\n            style={{ cursor: \"pointer\" }}\n            onClick={() => {\n              setCurrMasterValue(prevMasterValue);\n              setCurrSlaveValues(prevSlaveValues);\n              toggleEdit();\n            }}\n          />\n        </>\n      );\n    }\n    return <Edit style={{ cursor: \"pointer\" }} onClick={toggleEdit} />;\n  }\n  function onSlaveChange(event, valueIndex) {\n    let copySlaves = currSlaveValues.map((val, idx) => {\n      if (idx === valueIndex) return event.target.value;\n      return val;\n    });\n    setCurrSlaveValues(copySlaves);\n  }\n\n  function onMasterChange(event) {\n    setCurrMasterValue(event.target.value);\n  }\n\n  return (\n    <Grid container spacing={1} alignItems=\"flex-end\">\n      {slaves &&\n        slaves.map((slave, idx) => {\n          return (\n            <Grid item key={idx}>\n              {slave({\n                value: currSlaveValues[idx] || \"\", // \"\" required for label placeholder mechanics\n                InputProps: { readOnly: !edit },\n                onChange: event => onSlaveChange(event, idx)\n              })}\n            </Grid>\n          );\n        })}\n      <Grid item>\n        {master({\n          value: currMasterValue || \"\", // \"\" required for label placeholder mechanics\n          InputProps: { readOnly: !edit },\n          onChange: onMasterChange\n        })}\n      </Grid>\n      {editable && <Grid item>{icons()}</Grid>}\n    </Grid>\n  );\n}\n\nexport default EditableFields;\n","import axios from \"axios\";\nimport React from \"react\";\nimport { Scatter } from \"react-chartjs-2\";\nimport { Typography } from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction UserStats() {\n  const token = React.useContext(AuthContext);\n  const [involvementRate, setInvolvementRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  React.useEffect(() => {\n    axios\n      .get(`/user/stats/v1`, { headers: { token } })\n      .then(({ data }) => {\n        console.log(data);\n        const { userStats } = data;\n        setInvolvementRate(userStats[\"involvementRate\"]);\n        setChannelsData(\n          userStats[\"channelsJoined\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numChannelsJoined\"]\n            };\n          })\n        );\n        setDmsData(\n          userStats[\"dmsJoined\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numDmsJoined\"]\n            };\n          })\n        );\n        setMessagesData(\n          userStats[\"messagesSent\"].map(obj => {\n            return {\n              x: new Date(obj[\"timeStamp\"] * 1000),\n              y: obj[\"numMessagesSent\"]\n            };\n          })\n        );\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, [token]);\n\n  return (\n    <>\n      <Typography variant=\"h5\">User statistics</Typography>\n      <p>Involvement rate: {(involvementRate * 100).toFixed(2)}%</p>\n      <Scatter\n        data={{\n          datasets: [\n            {\n              label: \"Channels joined\",\n              data: channelsData,\n              fill: false,\n              borderColor: \"#742774\",\n              showLine: true\n            },\n            {\n              label: \"Dms joined\",\n              data: dmsData,\n              fill: false,\n              borderColor: \"#4287f5\",\n              showLine: true\n            },\n            {\n              label: \"Messages sent\",\n              data: messagesData,\n              fill: false,\n              borderColor: \"#bd2d4f\",\n              showLine: true\n            }\n          ]\n        }}\n        options={{\n          scales: {\n            xAxes: [\n              {\n                title: \"time\",\n                type: \"time\",\n                gridLines: {\n                  lineWidth: 2\n                },\n                time: {\n                  unitStepSize: 200,\n                  displayFormats: {\n                    millisecond: \"MMM DD HH:mm\",\n                    second: \"MMM DD HH:mm\",\n                    minute: \"MMM DD HH:mm\",\n                    hour: \"MMM DD HH:mm\",\n                    day: \"MMM DD\",\n                    week: \"MMM DD\",\n                    month: \"MMM DD\",\n                    quarter: \"MMM DD\",\n                    year: \"MMM DD\"\n                  }\n                }\n              }\n            ]\n          }\n        }}\n      />\n    </>\n  );\n}\n\nexport default UserStats;\n","import {\n  List,\n  ListItem,\n  ListSubheader,\n  TextField,\n  Typography\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport AuthContext from \"../../AuthContext\";\nimport { extractUId } from \"../../utils/token\";\nimport EditableFields from \"./EditableFields\";\nimport UserStats from \"./UserStats\";\nimport Placeholder from \"../Placeholder\";\n\nfunction Profile({ profile }) {\n  const [loading, setLoading] = React.useState(true);\n  const [profileDetails, setProfileDetails] = React.useState({});\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    axios\n      .get(`/user/profile/v3`, { params: { uId: profile }, headers: { token } })\n      .then(({ data }) => {\n        console.log(data);\n        const { user } = data;\n        setProfileDetails(user);\n      })\n      .catch(err => {\n        console.error(err);\n      })\n      .finally(() => setLoading(false));\n  }, [profile, token]);\n\n  function updateName(nameLast, nameFirst) {\n    axios\n      .put(\n        `/user/profile/setname/v2`,\n        { nameFirst, nameLast },\n        { headers: { token } }\n      )\n      .then(() => {\n        console.log(\"all good\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  function updateEmail(email) {\n    axios\n      .put(`/user/profile/setemail/v2`, { email }, { headers: { token } })\n      .then(() => {\n        console.log(\"all good\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  function updateProfileImgUrl(rawText) {\n    const items = rawText.split(\",\");\n    axios\n      .post(\n        `/user/profile/uploadphoto/v1`,\n        {\n          imgUrl: items[0],\n          xStart: Number.parseInt(items[1]),\n          yStart: Number.parseInt(items[2]),\n          xEnd: Number.parseInt(items[3]),\n          yEnd: Number.parseInt(items[4])\n        },\n        { headers: { token } }\n      )\n      .then(() => {\n        console.log(\"all good\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  function updateHandle(handleStr) {\n    axios\n      .put(`/user/profile/sethandle/v2`, { handleStr }, { headers: { token } })\n      .then(() => {\n        console.log(\"all good\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  const editable = uId.toString() === profile;\n\n  return (\n    <>\n      <Typography variant=\"h4\">Profile</Typography>\n      {loading ? (\n        <Placeholder />\n      ) : (\n        <List subheader={<ListSubheader>Profile Details</ListSubheader>}>\n          <ListItem key={\"name\"}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.nameLast}\n              slaveValues={[profileDetails.nameFirst]}\n              master={passedProps => (\n                <TextField label={\"Last Name\"} {...passedProps} />\n              )}\n              slaves={[\n                passedProps => (\n                  <TextField label={\"First Name\"} {...passedProps} />\n                )\n              ]}\n              onSave={updateName}\n            />\n          </ListItem>\n          <ListItem key={\"email\"}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.email}\n              master={passedProps => (\n                <TextField label={\"Email\"} {...passedProps} />\n              )}\n              onSave={updateEmail}\n            />\n          </ListItem>\n          <ListItem key={\"handle\"}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.handleStr}\n              master={passedProps => (\n                <TextField label={\"Handle\"} {...passedProps} />\n              )}\n              onSave={updateHandle}\n            />\n          </ListItem>\n          <ListItem key={\"imgUrl\"}>\n            <EditableFields\n              editable={editable}\n              masterValue={profileDetails.profileImgUrl}\n              master={passedProps => (\n                <TextField label={\"imgUrl,x1,y1,x2,y2\"} {...passedProps} />\n              )}\n              onSave={updateProfileImgUrl}\n            />\n          </ListItem>\n          <br />\n          <div>\n            NOTE: The final field input is to set a profile image. Please enter\n            the 5 components (image url, xStart, yStart, xEnd, yEnd) separated\n            by commas.\n          </div>\n        </List>\n      )}\n      <br />\n      {editable && <UserStats />}\n    </>\n  );\n}\n\nexport default Profile;\n","import React from \"react\";\nimport Layout from \"../components/Layout\";\nimport ProfileChannelLists from \"../components/ProfileChannelLists\";\nimport Profile from \"../components/Profile\";\n\nfunction ProfilePage({ match }) {\n  const { profile } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Profile profile={profile} />}\n    />\n  );\n}\n\nexport default ProfilePage;\n","import { Typography, List, ListSubheader } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport AuthContext from \"../../AuthContext\";\nimport Message from \"../Message\";\n\nfunction Search({ queryStr, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [messages, setMessages] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  // Only perform search if there is a query\n  React.useEffect(() => {\n    function performSearch() {\n      axios\n        .get(\"/search/v1\", {\n          params: {\n            queryStr\n          },\n          headers: { token }\n        })\n        .then(({ data }) => {\n          const { messages } = data;\n          if (typeof messages !== \"undefined\" && !Array.isArray(messages))\n            return;\n          setMessages(messages);\n          setLoading(false);\n        })\n        .catch(err => {\n          setLoading(false);\n        });\n    }\n    if (queryStr !== \"\") performSearch();\n  }, [token, queryStr]);\n\n  // If there is no query\n  if (queryStr === \"\") {\n    return (\n      <>\n        <Typography variant=\"h4\" style={{ marginBottom: 10 }}>\n          Search\n        </Typography>\n        <Typography variant=\"h6\">\n          Enter a query in the search bar above\n        </Typography>\n      </>\n    );\n  }\n\n  // If there is a query\n  return (\n    <>\n      <Typography variant=\"h4\" style={{ marginBottom: 10 }}>\n        Search Results\n      </Typography>\n      {loading ? (\n        <LinearProgress />\n      ) : messages.length == 0 ? (\n        <Typography variant=\"h6\">\n          Your search did not return any results\n        </Typography>\n      ) : (\n        <List\n          subheader={<ListSubheader>Messages</ListSubheader>}\n          style={{ width: \"100%\" }}\n        >\n          {messages\n            .slice()\n            .reverse()\n            .map(message => (\n              <Message key={message.messageId} {...message} />\n            ))}\n        </List>\n      )}\n    </>\n  );\n}\n\nexport default Search;\n","import React from \"react\";\nimport Layout from \"../components/Layout\";\nimport ProfileChannelLists from \"../components/ProfileChannelLists\";\nimport Search from \"../components/Search\";\n\nfunction SearchPage({ match }) {\n  const { queryStr = \"\" } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Search queryStr={queryStr} />}\n    />\n  );\n}\n\nexport default SearchPage;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext);\n  console.log(token);\n  if (!token) {\n    return <Redirect to=\"/login\" />;\n  }\n  return <Route {...props} />;\n}\n\nexport default ProtectedRoute;\n","import axios from \"axios\";\n// import qs from 'qs';\nimport _ from \"lodash\";\n\nimport { url } from \"./utils/constants\";\nimport { DEFAULT_ERROR_TEXT } from \"./utils/text\";\nimport { toast } from \"react-toastify\";\n\naxios.defaults.baseURL = url;\naxios.defaults.headers.put[\"Content-Type\"] = \"application/json\";\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\naxios.defaults.headers.delete[\"Content-Type\"] = \"application/json\";\n\n// temporarily cancel all requests until backend is ready\nconst CancelToken = axios.CancelToken;\n\naxios.interceptors.request.use(request => {\n  // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n  //     request.data = qs.stringify(request.data);\n  // }\n  return request;\n});\n\nconst errorHandler = error => {\n  // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n  // if has response show the error\n  console.error(error);\n\n  let message = DEFAULT_ERROR_TEXT;\n\n  if (error.response) {\n    const found =\n      typeof error.response.data === \"string\" &&\n      error.response.data.match(/<p>(.*)<\\/p>/);\n    const responseMessage = found && found.length > 1 && found[1];\n    message =\n      _.get(error, \"response.data.message\") ||\n      responseMessage ||\n      DEFAULT_ERROR_TEXT;\n  }\n\n  toast.error(message);\n\n  return Promise.reject({ ...error });\n};\n\nconst responseHandler = response => {\n  if (\"error\" in response) {\n    toast.error(DEFAULT_ERROR_TEXT);\n    return Promise.reject();\n  }\n\n  return response;\n};\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n","// General POST error\nexport const DEFAULT_ERROR_TEXT = \"An error occured. Try again later\";\n\n// Specific GET errors (deprecated)\nexport const CHANNEL_ERROR_TEXT = \"Unable to retrieve channel information\";\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport \"./App.css\";\n\nimport HomePage from \"./pages/HomePage\";\nimport ChannelPage from \"./pages/ChannelPage\";\nimport DmPage from \"./pages/DmPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport RegisterPage from \"./pages/RegisterPage\";\nimport ForgotPasswordPage from \"./pages/ForgotPasswordPage\";\nimport ResetPasswordPage from \"./pages/ResetPasswordPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport SearchPage from \"./pages/SearchPage\";\n\nimport ProtectedRoute from \"./components/Layout/ProtectedRoute\";\n\nimport { AuthProvider } from \"./AuthContext\";\nimport \"./axios\";\n\nfunction App() {\n  document.title = \"UNSW Treats\";\n\n  const [authDetails, setAuthDetails] = React.useState(\n    localStorage.getItem(\"token\")\n  );\n\n  function setAuth(token, uId) {\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"uId\", uId);\n    setAuthDetails(token);\n  }\n  return (\n    <AuthProvider value={authDetails}>\n      <Router>\n        <Switch>\n          <Route\n            exact\n            path=\"/login\"\n            render={props => {\n              return <LoginPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route\n            exact\n            path=\"/register\"\n            render={props => {\n              return <RegisterPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route exact path=\"/forgot_password\" component={ForgotPasswordPage} />\n          <Route exact path=\"/reset_password\" component={ResetPasswordPage} />\n          <ProtectedRoute exact path=\"/\" component={HomePage} />\n          <ProtectedRoute path=\"/profile/:profile\" component={ProfilePage} />\n          <ProtectedRoute path=\"/channel/:channelId\" component={ChannelPage} />\n          <ProtectedRoute path=\"/dm/:dmId\" component={DmPage} />\n          <ProtectedRoute path=\"/search/:queryStr\" component={SearchPage} />\n          <ProtectedRoute path=\"/search\" component={SearchPage} />\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport MomentUtils from '@date-io/moment';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <App />\n      <ToastContainer\n        position=\"top-center\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnVisibilityChange\n        draggable\n        pauseOnHover\n      />\n    </MuiPickersUtilsProvider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}